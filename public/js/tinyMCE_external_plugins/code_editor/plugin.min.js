tinymce.PluginManager.add("code_editor",function(e,t){function n(){return e.getContent({source_view:!0})}function o(t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()}function c(e){let t=r.contentWindow;t.postMessage(e,"*")}function i(){e.windowManager.openUrl({title:"Source Code",url:t+"/dialog/dialog.html",buttons:[{type:"cancel",text:"Cancel"},{type:"custom",text:"Save",name:"submit",primary:!0}],onAction:function(e,t){if("submit"===t.name){let e={action:"request_code"};c(e)}},onMessage:function(e,t){"insert_code"===t.mceAction&&(o(t.data.code),e.close())}}),r=document.querySelector(".tox-dialog iframe"),r.addEventListener("load",function(){let e={action:"code_for_edit",code:n()};c(e)})}let r=null;return e.ui.registry.addButton("code_editor",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return i()}}),{getMetadata:function(){return{name:"Code editor"}}}});